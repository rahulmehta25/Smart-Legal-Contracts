# Staging Environment Configuration
# This environment is for pre-production testing

# =============================================================================
# ENVIRONMENT SETTINGS
# =============================================================================
ENVIRONMENT=staging
NODE_ENV=production

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=arbitration_staging
POSTGRES_USER=postgres
POSTGRES_PASSWORD=REPLACE_WITH_STAGING_PASSWORD
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# Database connection pool settings
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=15
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=REPLACE_WITH_STAGING_REDIS_PASSWORD
REDIS_DB=0
REDIS_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}

# Redis connection settings
REDIS_MAX_CONNECTIONS=100
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5

# =============================================================================
# APPLICATION SECRETS
# =============================================================================
JWT_SECRET=REPLACE_WITH_STAGING_JWT_SECRET
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

SESSION_SECRET=REPLACE_WITH_STAGING_SESSION_SECRET
ENCRYPTION_KEY=REPLACE_WITH_STAGING_ENCRYPTION_KEY

# =============================================================================
# EXTERNAL API KEYS
# =============================================================================
# Use test/development keys for staging
OPENAI_API_KEY=REPLACE_WITH_STAGING_OPENAI_KEY
OPENAI_MODEL=gpt-3.5-turbo
OPENAI_MAX_TOKENS=2048
OPENAI_TEMPERATURE=0.3

# =============================================================================
# DOMAIN AND URL CONFIGURATION
# =============================================================================
DOMAIN_URL=staging.arbitration-detector.com
FRONTEND_URL=https://staging.arbitration-detector.com
BACKEND_URL=https://api.staging.arbitration-detector.com
API_URL=https://api.staging.arbitration-detector.com

CORS_ORIGINS=https://staging.arbitration-detector.com,https://api.staging.arbitration-detector.com
CORS_ALLOW_CREDENTIALS=true

# =============================================================================
# FILE UPLOAD CONFIGURATION
# =============================================================================
MAX_UPLOAD_SIZE=50MB
ALLOWED_FILE_TYPES=pdf,doc,docx,txt,rtf
UPLOAD_DIRECTORY=/app/uploads
TEMP_DIRECTORY=/app/temp

PDF_PROCESSING_TIMEOUT=180
OCR_ENABLED=true
OCR_LANGUAGES=eng,fra,deu,spa

# =============================================================================
# MONITORING AND LOGGING
# =============================================================================
LOG_LEVEL=debug
LOG_FORMAT=json
LOG_FILE=/app/logs/app.log
LOG_ROTATION=daily
LOG_RETENTION=14

# Monitoring
GRAFANA_PASSWORD=REPLACE_WITH_STAGING_GRAFANA_PASSWORD

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=200
RATE_LIMIT_REQUESTS_PER_HOUR=2000

SECURITY_HEADERS_ENABLED=true
HSTS_MAX_AGE=31536000

SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=strict

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 3 * * *
BACKUP_RETENTION_DAYS=14
BACKUP_COMPRESSION=true
BACKUP_ENCRYPTION=false

# =============================================================================
# PERFORMANCE CONFIGURATION
# =============================================================================
WORKERS=2
WORKER_CLASS=uvicorn.workers.UvicornWorker
WORKER_CONNECTIONS=500
WORKER_TIMEOUT=120

MAX_CONNECTIONS=500
KEEPALIVE_TIMEOUT=5
REQUEST_TIMEOUT=60
REQUEST_MAX_SIZE=50MB

# =============================================================================
# FEATURE FLAGS
# =============================================================================
FEATURE_AI_ANALYSIS=true
FEATURE_DOCUMENT_COMPARISON=true
FEATURE_MULTILINGUAL_SUPPORT=true
FEATURE_COLLABORATION=true
FEATURE_BLOCKCHAIN_INTEGRATION=true
FEATURE_ADVANCED_ANALYTICS=true
FEATURE_VOICE_COMMANDS=true

# Enable beta features in staging
BETA_FEATURES_ENABLED=true

# =============================================================================
# STAGING SPECIFIC SETTINGS
# =============================================================================
DEBUG=false
TESTING=false
PROFILING_ENABLED=true
DEVELOPMENT_MODE=false
AUTO_RELOAD=false
SWAGGER_UI_ENABLED=true

# =============================================================================
# COMPLIANCE & AUDITING
# =============================================================================
GDPR_COMPLIANCE=true
CCPA_COMPLIANCE=true
AUDIT_LOGGING_ENABLED=true
AUDIT_LOG_LEVEL=debug
AUDIT_LOG_RETENTION=180

# =============================================================================
# TESTING OVERRIDES
# =============================================================================
# Allow more lenient settings for testing
EMAIL_VALIDATION_ENABLED=false
PHONE_VALIDATION_ENABLED=false
REQUIRE_EMAIL_VERIFICATION=false

# Test data seeding
SEED_TEST_DATA=true
TEST_USER_EMAIL=test@staging.arbitration-detector.com

# =============================================================================
# LOCALIZATION
# =============================================================================
TIMEZONE=UTC
DEFAULT_LANGUAGE=en
SUPPORTED_LANGUAGES=en,es,fr,de,ja,zh